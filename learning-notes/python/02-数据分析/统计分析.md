# 统计分析

> 使用 Python 进行统计分析和假设检验

## 1. 描述性统计

### 1.1 基础统计量

```python
import pandas as pd
import numpy as np

data = pd.Series([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])

# 均值
mean = data.mean()

# 中位数
median = data.median()

# 众数
mode = data.mode()

# 标准差
std = data.std()

# 方差
var = data.var()

# 分位数
q25 = data.quantile(0.25)
q75 = data.quantile(0.75)

# 偏度
skewness = data.skew()

# 峰度
kurtosis = data.kurtosis()
```

### 1.2 描述性统计摘要

```python
# 完整统计摘要
summary = data.describe()

# 自定义统计
def custom_stats(series):
    return pd.Series({
        'count': series.count(),
        'mean': series.mean(),
        'std': series.std(),
        'min': series.min(),
        '25%': series.quantile(0.25),
        '50%': series.median(),
        '75%': series.quantile(0.75),
        'max': series.max()
    })
```

## 2. 假设检验

### 2.1 t检验

```python
from scipy import stats

# 单样本t检验
sample = [1, 2, 3, 4, 5]
t_stat, p_value = stats.ttest_1samp(sample, popmean=3)

# 独立样本t检验
group1 = [1, 2, 3, 4, 5]
group2 = [6, 7, 8, 9, 10]
t_stat, p_value = stats.ttest_ind(group1, group2)

# 配对样本t检验
before = [1, 2, 3, 4, 5]
after = [2, 3, 4, 5, 6]
t_stat, p_value = stats.ttest_rel(before, after)
```

### 2.2 卡方检验

```python
from scipy.stats import chi2_contingency

# 列联表
observed = [[10, 20, 30],
            [6, 9, 17]]

chi2, p_value, dof, expected = chi2_contingency(observed)
```

### 2.3 方差分析（ANOVA）

```python
from scipy.stats import f_oneway

group1 = [1, 2, 3, 4, 5]
group2 = [2, 3, 4, 5, 6]
group3 = [3, 4, 5, 6, 7]

f_stat, p_value = f_oneway(group1, group2, group3)
```

## 3. 相关性分析

### 3.1 皮尔逊相关系数

```python
import pandas as pd

df = pd.DataFrame({
    'x': [1, 2, 3, 4, 5],
    'y': [2, 4, 6, 8, 10]
})

# 皮尔逊相关系数
correlation = df['x'].corr(df['y'])

# 相关矩阵
correlation_matrix = df.corr()
```

### 3.2 斯皮尔曼相关系数

```python
# 斯皮尔曼等级相关系数
spearman_corr = df['x'].corr(df['y'], method='spearman')
```

## 4. 回归分析

### 4.1 线性回归

```python
from sklearn.linear_model import LinearRegression
import numpy as np

X = np.array([[1], [2], [3], [4], [5]])
y = np.array([2, 4, 6, 8, 10])

model = LinearRegression()
model.fit(X, y)

# 预测
predictions = model.predict(X)

# 系数
slope = model.coef_[0]
intercept = model.intercept_
```

### 4.2 回归统计

```python
from sklearn.metrics import r2_score, mean_squared_error

r2 = r2_score(y, predictions)
mse = mean_squared_error(y, predictions)
rmse = np.sqrt(mse)
```

## 5. 分布检验

### 5.1 正态性检验

```python
from scipy.stats import shapiro, normaltest

data = np.random.normal(0, 1, 100)

# Shapiro-Wilk检验
stat, p = shapiro(data)

# D'Agostino检验
stat, p = normaltest(data)
```

## 6. 总结

统计分析要点：
- **描述性统计**：均值、中位数、标准差、分位数、偏度、峰度
- **假设检验**：t检验、卡方检验、ANOVA
- **相关性分析**：皮尔逊、斯皮尔曼相关系数
- **回归分析**：线性回归、R²、MSE
- **分布检验**：正态性检验

统计分析帮助理解数据特征和关系。

